redis是基于内存高性能的kv数据库，具有以下特点

1. 主要用于缓存、数据库、分布式锁、消息队列
2. 单线程高性能
3. 支持数据持久化到磁盘，重启时加载
4. 支持主从集群，读写分离且保证高可用

# ROB
将数据库状态持久化到磁盘，用于恢复数据库
- save 阻塞数据库，一直到备份完成
- bgsave 派生子程序异步创建ROB文件
- save 设置条件自动备份，满足条件后执行bgsave

# AOF
append only file，通过保存服务器所执行的写命令记录状态，类似mysql binlog文件

- 服务器配置appendfsync选项的值直接决定AOF持久化功能的效率和安全性，always 每次都要fsync写入磁盘，提高了安全性，降低了性能
- client重新执行aof文件内容恢复数据库
- 写入次数变多则aof文件膨胀，通过读取当前数据库状态并记录之后的写入可压缩空间
