本部分主要概述 HTTP 协议。接下来介绍了 Web 的基础构件以及 HTTP 的核心技术。

# URL与资源
- 资源：web服务器中的任何文件或数据
- MIME：媒体类型，HTTP传输数据时，为每种类型的数据都打上MIME类型标签，便于客户端解析,MIME最早用于邮件协议，HTTP协议也借用了，通常表示为**对象类型/子类型**
    - HTML 格式的文本文档由 text/html 类型来标记。
    - 普通的 ASCII 文本文档由 text/plain 类型来标记。
    - JPEG 格式的图片为 image/jpeg 类型。
    - GIF 格式的图片为 image/gif 类型
- URI/URL/URN
    - URI：统一资源标识符，每个资源都有自己唯一的标识符，例如 http://www.joes-hardware.com/specials/saw-blade.gif，它包含URL和URN
    - URL：统一资源定位符，包含三个部分，方案(http://)、服务器地址(www.kanggege.top)、资源位置(/static/page/index.html)
    - URI：URI 的第二种形式就是统一资源名(URN)。URN 是作为特定内容的唯一名称使用的,与目前的资源所在地无关。使用这些与位置无关的 URN,就可以将资源四处搬移。通过 URN,还可以用同一个名字通过多种网络访问协议来访问资源，未大规范使用

## URL
这里不对URL和URI做过多的区分，本文里将他们混用

URL代表资源的定位，不仅是HTTP请求，在任何类型的请求中，他都代表资源的定位，且格式一样，用在HTTP中它通常是如下格式

    scheme://host:post/path?query1=val1&query2=val2

虽然很多协议都用到了URL，且语法不太相同，但总的来说他们都遵守了以下的语法，且没有协议全部用到每一部分语法

    <scheme>://<user>:<password>@<host>:<port>/<path>;<params>?<query>#<frag>

- scheme：方案名是大小写无关的 http:// 和 HTTP:// 是等价的
- host、post：他们两个定位了某个电脑的某一进程，host可以是主机名(www.xxx.com)，会被DNS解析为IP，或是直接使用IP，post是用于TCP协议，用来定位某个进程，它的长度是四字节，所以范围是 0~65535，通常HTTP服务使用80端口,我们直接输入主机名，浏览器解析时会在后面加上:80
-　user、password：很多服务器会要求加上账号密码才能访问，例如ftp服务
- query：HTTP协议不支持;key=val形式的参数，支持持query参数，按照HTTP协议的规定，你可以放置无限的参数，但是各个浏览器和Web服务器上实现有所不同，例如IE浏览器限制URL的长度不能超过2k，所以可以携带的query参数不能超过2k，如果要携带大量参数，应该使用post
- frag：片段，有些资源类型,比如 HTML,除了资源级之外,还可以做进一步的划分。比如,对一个带有章节的大型文本文档来说,资源的 URL 会指向整个文本文档,但理想的情
况是,能够指定资源中的那些章节

## uri编码
假设有url片段 “name1=value1&name2=value2” ，ASCLL表示为 

    6E616D6531 3D 76616C756531 26 6E616D6532 3D 76616C756532

服务器收到该字节流后，会逐一处理，碰到 3D 或 26 时，看做保留字进行处理

如果我们在值中想使用这些保留字，name1=val&ue，则服务器解析的时候就会出现错误，所以我们需要对这些保留字进行转义

### 转义
根据2005年发布的RFC3986“%编码”规范：

- 对URL中属于ASCII字符集的非保留字不做编码
- 对URL中的保留字需要取其ASCII内码，然后加上“%”前缀将该字符进行替换（编码），保留字主要有

    ! * ' ( ) ; : @ & = + $ , / ? # [ ]

- 对于URL中的非ASCII字符需要取其Unicode内码，然后使用 % 对其内码进行编码

还有一些字符，当他们直接放在Url中的时候，可能会引起解析程序的歧义。这些字符被视为不安全字符，原因有很多。

- 空格：Url在传输的过程，或者用户在排版的过程，或者文本处理程序在处理Url的过程，都有可能引入无关紧要的空格，或者将那些有意义的空格给去掉。
- 引号以及<>：引号和尖括号通常用于在普通文本中起到分隔Url的作用
- #：通常用于表示书签或者锚点
- %：百分号本身用作对不安全字符进行编码时使用的特殊字符，因此本身需要编码
- {}|\^[]`~：某一些网关或者传输代理会篡改这些字符

由于这种编码是采用“%”加上字符内码的方式，所以，有些地方也称其为“百分号编码”

对于url中非ASCII参数，一般浏览器会采用页面当前编码，在新的浏览器中可能会直接默认使用unicode编码

实际上，一般只会对非ASCII字符进行编码，在参数值中的&可以通过上下文分析出来
