为什么要搞链接？在代码和系统之间加一层，避免代码和系统耦合，其实链接就是个适配器，后面的虚拟内存也是如此

执行 main 函数的过程
- 编译器：将代码翻译成汇编语言组成的文件 main.s
- 汇编器：将汇编语言翻译为可重定位目标文件 main.o
- 链接器：将main.o 和其他关联的文件（可能是sum.o）以及系统目标文件组合起来，创建可执行目标文件 main
- 加载器：将 main 的的代码和数据复制到内存中，并将控制权转移到程序的开头

这章节主要讲链接器

# 静态链接
为了构造可执行文件，链接器必须完成两个主要任务
- 符号解析：目标文件定义和引用符号，每个符号对应一个函数、一个全局变量、一个静态变量，符号解析是将符号的引用和符号的定义关联起来
- 重定位：编译器和汇编器生成从地址0开始的代码和数据节，链接器通过把每个符号定义与一个内存位置关联起来，从而重定位这些数据节，然后所有对这些符号的引用，使得他们指向这个内存位置

# 可重定位目标文件
可充定位文件中包含信息大致如下
- 机器代码
- 只读数据（常量）
- 已初始化的全局变量和静态变量，占有内存
- 未初始化的全局变量和静态变量，并没有分配内存，仅仅是占位符
- 符号表：代码中可被其他可重定位文件访问的函数和变量信息（帮助链接器定位）
- 代码中引用其他模块的，需要重定位的函数和变量信息

# 符号表与符号
根据不同的上下文，有三种不同的符号
- 由模块m定义且其他模块可以访问的全局符号
- 访问其他模块的全局符号的符号
- 只能被模块m定义和引用的全局符号

链接器对定义在栈中的符号不感兴趣

# 与静态库链接
上面我们说的都是对可重定位文件的链接，我们所写的文件一定是要完全加载并执行的（不然你为啥要写他），而静态库链接则有所区别

对静态库的链接又两种方式
1. 由编译器分析代码中所用到的静态库，并替换，但是这样每次更改静态库就要更改编译器，不实用
2. 将静态库完全加载到程序中，但是这样每个程序都会有静态库一个完整的副本，即使我们绝大部分都没用到。可以将静态库开发为不同的模块，程序用到哪个模块再去链接它（如果你用到静态库里一个模块的无关紧要的函数，你就要认真考虑为了这个函数去链接一个模块是否值得了）

# 重定位
链接所需要的库后，在所有重定位文件的符号表中查找对应的符号，然后需要把符号重定位

将所有全局变量重新分配位置，并更新引用符号所占用的位置
