优化程序性能主要从两方面下手
- 优化数据结构和算法
- 优化程序本身执行的性能

我们主要关注的是优化程序本身的执行性能

优化程序是个黑箱操作，我们不知道编译器内部的执行细节，很难对程序做调整，所以优化程序性能更重要的是测试，不断改变语句测试不同情况下性能的改变

# 循环的低效
```
void lower(char *s)
{
    for(long i = 0; i < strlen(s); i++)
    {
        if(s[i] >= 'A' && s[i] <= 'Z')
            s[i] -= ('A' - 'a');
    }
}
```
新手经常写出上面的代码，但是从汇编层面来看，这样的代码是非常低效的，每一次执行循环体，做判断时都要执行 strlen(s) 函数，对于 ('A' - 'a') 编译器能检测出它是个常量，并优化为只执行一次，但 strlen(s) 编译器不能确定它是否会在下一次循环中改变值，所以每次都要执行这个函数

改进的代码如下
```
void lower2(char *s)
{
    long len = strlen(s);
    for(long i = 0; i < len; i++)
    {
        if(s[i] >= 'A' && s[i] <= 'Z')
            s[i] -= ('A' - 'a');
    }
}
```

如果你不知道编译器是否能分析出你的意图并做优化，那么你应该自己手动优化并测试