# 数据类型
## 数值型
- 整形
Tinyint-1、Smallint-2、Mediumint-3、int-4==integer、Bigint-8

整形可以设置有符号、无符号，无符号的范围是有符号的二倍

可以为整形设置长度，但是并不能限制整形的大小，而是在设置无符号零填充后有效，int(7)当查询值不满7位时会在前面补充0，总结来说没什么卵用

Bigint最大可以表示到19位，类似于QQ号这样的数据就可以用Bigint存储，节约空间

- 浮点型
float-4(len,小数)、double-8(len,小数)

他们使用标准IEEE浮点数运算，最大长度都是255，超出小数的位数会被四舍五入，但是double的范围比float大，浮点型意味着尽量接近于精度，但可能无法完全保留精度，默认下在范围内自动满足小数位

- 定点型
decimal(n,m)，最长n位，其中小数精度m位，decimal(n) == decimal(n,0) 那就没啥意义了 

他的表示范围和double相同，但实质采用字符串保存并运算，所以精度比double准确，默认下(10,0)，插入后自动舍弃精度，最大限制65位

除非要特别精准的，比如money计算，否则不要用它，性能不好

## 字符型
char(len)-255 不可变字符，varchar(len)-n(utf-8下n==21844，最大字节数65535，具体最大长度和编码方式有关) 可变字符

len都代表最长**字符数**，但char一定占用len字符空间，varchar根据插入内容决定字符长度(略节约空间但效率略低)并+1或+2、+3记录长度

mysql处理char类型数据会自动清除字符后面的空格，因为当长度不够时会自动在后面加空格补充长度为len，varchar不会

超指出长度后会截取

varchar可变意味着引擎要对变化作出处理，InnerDB可能会做页分裂，如果字符串在小范围内变化，可以使用char

大多情况下varchar都是最好选择

## 文本型
字符型可存储的范围是有限的，对存储文章等就不够用了，mysql有TEXT和BLOB两种格式存储大文本

innerdb不会真的将文本数据存储在库中，而是保存文本为文件，库中保留指向文件的指针，所以text和blob不能为null，且不能作为索引

- TEXT 可变长度，最多 65535 个字符
- MEDIUMTEXT 可变长度，最多 16777215（2^24 - 1）个字符
- LONGTEXT 可变长度，最多 4294967295（2^32 - 1）（4G）个字符

## 日期型
date-4、time-3、year-1都分别只保存日期、事件、年

- date YYYY-MM-DD 1000~9999年
- datetime YYYY-MM-DD hh:mm:ss
- time hh:mm:ss
- 

timestamp-4 1970-2038 截止到2038年的某个时刻，和实际时区有关，受mysql版本影响强

timestamp的空间大概是datatime的一半，且not null，如果插入值为null，自动存储当前时间

mysql时间的设置会受时区的影响

- timestamp 以UTC存储，读取则从UTC转为当前时区时间，不同时区下读取值可能不同
- NOW()函数值受时区影响，得到datetime格式值

可以修改操作系统时区，但损失了跨平台性，或修改配置文件添加 default-time-zone='timezone'

最好的还是启动数据库时设置 --default-time-zone=timezone

## 枚举类型
枚举类型插入值时不区分大小写

# 约束
- NOT NULL约束，建议在所有列上使用
- default约束
- primary key 主键约束，非null
- unique key 唯一约束，可以为null
- foreign key 外键约束，不建议使用

# 数据类型优化
选用不同的类型会对性能产生不同对影响，有一些原则

- 更小：更小通常意味CPU处理周期小，占用缓存少，占用磁盘更少等，性能更好
- 更简单：越简单的数据类型通常操作性能更好，比如在可行的范围内使用无符号的 int 或 bigint 存储数字账号，并且尽可能使用mysql内建类型
- NOT NULL：所有可能是索引的字段应当NOT NULL，并设置默认值，使用NULL会让索引性能底下
  - InnerDB使用单独bit存储NULL值，所以对于稀疏数据可以节约空间，要权衡可能节约但空间和操作便利性

