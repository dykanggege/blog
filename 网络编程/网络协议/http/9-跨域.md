# 同源策略
如果两个页面的**协议、端口和域名**都相同，则两个页面具有相同的源(注：http和https属于不同协议)

同源政策起初目的是为了保护cookie，A网站设置的cookie，B网站不能打开，防止cookie被恶意窃取

随着互联网发展，同源越来越严格，目前如果非同源将有三种行为受限制

1. Cookie、LocalStorage、IndexDB无法读取
2. DOM无法获取
3. ajax请求不能发送

前两个限制是有必要的，但是ajax的限制会给开发带来很多不便

## cookie
两个网页一级域名相同，二级域名不同，浏览器允许通过document.domain共享cookie

A：http://nb.kanggege.com/a.html、B:http://nba.kanggege.com/b.html，那么只要设置相同的document.domain，两个网页可以共享cookie

服务器在设置cookie时也可以指定一级域名，Seet-Cookie：key=val; domain=.kanggege.com; path=/ 

这样二级三级域名不用做任何设置，都能读取这个cookie

## ajax
同源政策规定，ajax只能发给同源的网址，否则就报错，有三个方法避免这个限制


# jsonp
script标签可以发送给任意的网站，不受同源影响，就有大神搞出了jsonp

```
function addScriptTag(src){
    var script = document.createElement('script')
    script.setAttribute('type','text/javascript')
    script.src = src
    document.body.appendChild(script)
}

addScriptTag('http://kanggege.com/api?callback=task')

function task(data){
    console.log(data) //后台会将数据放到data中，这里定义请求到数据的回调函数
}

```

服务器接收到请求后，返回一段js脚本，就是一个函数调用，task({backdata:data})
