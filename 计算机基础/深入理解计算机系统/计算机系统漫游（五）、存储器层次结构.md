寄存器 > 高速缓存 > 主存 > 磁盘，计算机内部有着井然有序的存储层次，越靠近 cpu 的存储结构速度越快，访问寄存器甚至是0个周期，而访问主存要上百个周期，磁盘甚至达到了千万个周期。

# 控制器
主存中的存储被分为多个模块，每个模块中是一个个的小单元，通过控制器按坐标访问不同模块，就能得到对应的字节

# 总线
cpu 通过总线访问主存，每次cpu和主存的数据传送都是通过一系列步骤来完成的，这些步骤称为**总线事务**。

读事务从主存传输数据到cpu，写事务从cpu传入数据到主存

总线是一组并行的导线，能携带地址、数据和控制信号

# 局部性
存储层次的特点也决定了将不同数据放在不同的层次结构中，这个思想围绕着计算机一个叫局部性的属性。

良好的局部性程序应该访问最近的存储结构（缓存原理）

## 空间局部性
空间局部性是指，尽可能小步的（两个地址之间的距离）访问内存，如下
```
// 不好的空间局部性
int arr[10][10];
int sum = 0;

for(int i = 0; i < 10; i++)
{
    for(int j = 0; j < 10; j++)
    {
        sum += arr[j][i];
    }
}
// 好的空间局部性，将上面数组访问的顺序改为 arr[i][j]，减小了内存跳跃跨度
```
## 时间局部性
时间局部性是指，尽可能访问最近时间内（逻辑上）最近的遍历
